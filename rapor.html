<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Rapor SD PSI</title>
  <style>
    body { font-family: 'Times New Roman', serif; margin: 40px; font-size: 14px; }
    table { width: 100%; border-collapse: collapse; margin-bottom: 12px; }
    th, td { border: 1px solid #000; padding: 6px; vertical-align: top; }
    .no-border td, .no-border th { border: none; padding: 4px; }
    .center { text-align: center; }
    .section-title { font-weight: bold; margin-top: 8px; margin-bottom: 4px; text-align: left; }
    .section-title-center { font-weight: bold; margin-top: 8px; margin-bottom: 4px; text-align: center; }
    .footer { margin-top: 40px; }
    .ttd-row { display: flex; justify-content: space-between; margin-bottom: 40px; }
    .ttd { width: 45%; text-align: center; }
    .ttd-bottom { text-align: center; margin-top: 40px; }
    .col-no { width: 5%; text-align: center; }
    .col-mapel { width:25%;  text-align: justify;}
    .col-nilai { width: 8%; text-align: center; }
    .col-capai { width: 70%;  text-align: justify;}
    .half-table { width: 50%; }
    .text-center { text-align: center; }
  </style>
</head>
<body>

  <!-- Identitas Siswa -->
  <table class="no-border">
    <tr>
      <td>Nama Peserta Didik</td><td>: <span id="nama_siswa"></span></td>
      <td>Kelas</td><td>: <span id="kelas"></span></td>
    </tr>
    <tr>
      <td>NISN/ NIS</td><td>: <span id="nisn"></span> / <span id="nis"></span></td>
      <td>Fase</td><td>: <span id="fase"></span></td>
    </tr>
    <tr>
      <td>Nama Sekolah</td><td>: SD PSI FATHIR ALFATH</td>
      <td>Semester</td><td>: <span id="semester"></span></td>
    </tr>
    <tr>
      <td>Alamat</td><td>: Jl. Lintas Barat Sumatera Gedung Sako II Kec. Kaur Selatan Kab. Kaur</td>
      <td>Tahun Ajaran</td><td>: <span id="tahun_ajaran"></span></td>
    </tr>
  </table>

  <h3 class="center">LAPORAN HASIL BELAJAR SUMATIF AKHIR SEMESTER</h3>

  <!-- Kelompok A -->
  <div class="section-title">Kelompok A</div>
  <table>
    <tr>
      <th class="col-no">No.</th><th class="col-mapel">Mata Pelajaran</th>
      <th class="col-nilai">Nilai Akhir</th><th class="col-capai">Capaian Kompetensi</th>
    </tr>
    <tr><td>1</td><td>Pendidikan Agama Islam dan Budi Pekerti</td><td id="nilai_pai" class="text-center"></td><td id="deskripsi_pai"></td></tr>
    <tr><td>2</td><td>Pancasila</td><td id="nilai_pkn" class="text-center"></td><td id="deskripsi_pkn"></td></tr>
    <tr><td>3</td><td>Bahasa Inggris</td><td id="nilai_bing" class="text-center"></td><td id="deskripsi_bing"></td></tr>
    <tr><td>4</td><td>Ilmu Pengetahuan Alam dan Sosial</td><td id="nilai_ipas" class="text-center"></td><td id="deskripsi_ipas"></td></tr>
    <tr><td>5</td><td>Matematika</td><td id="nilai_mtk" class="text-center"></td><td id="deskripsi_mtk"></td></tr>
    <tr><td>6</td><td>Bahasa Arab</td><td id="nilai_barab" class="text-center"></td><td id="deskripsi_barab"></td></tr>
    <tr><td>7</td><td>Pendidikan Jasmani, Olahraga, dan Kesehatan</td><td id="nilai_pjok" class="text-center"></td><td id="deskripsi_pjok"></td></tr>
    <tr><td>8</td><td>Bahasa Indonesia</td><td id="nilai_bindo" class="text-center"></td><td id="deskripsi_bindo"></td></tr>
    <tr><td>9</td><td>TIK/Informatika</td><td id="nilai_tik" class="text-center"></td><td id="deskripsi_tik"></td></tr>
  </table>

  <!-- Kelompok B -->
  <div class="section-title">Kelompok B</div>
  <table>
    <tr>
      <th class="col-no">No.</th><th class="col-mapel">Mata Pelajaran</th>
      <th class="col-nilai">Nilai Akhir</th><th class="col-capai">Capaian Kompetensi</th>
    </tr>
    <tr><td>1</td><td>Adab, Hadits dan Do'a (AHD)</td><td id="nilai_ahd" class="text-center"></td><td id="deskripsi_ahd"></td></tr>
    <tr><td>2</td><td>T2Q</td><td id="nilai_t2q" class="text-center"></td><td id="deskripsi_t2q"></td></tr>
    <tr><td>3</td><td>Sirah</td><td id="nilai_sirah" class="text-center"></td><td id="deskripsi_sirah"></td></tr>
  </table>

  <!-- Ekstrakurikuler -->
  <table>
    <tr>
      <th class="col-no">No.</th><th class="col-mapel">Ekstrakurikuler</th>
      <th class="col-nilai">Predikat</th><th class="col-capai">Keterangan</th>
    </tr>
    <tr><td>1</td><td id="ekskul1"></td><td id="predikat1" class="text-center"></td><td id="ket1" class="text-center"></td></tr>
    <tr><td>2</td><td id="ekskul2"></td><td id="predikat2" class="text-center"></td><td id="ket2" class="text-center"></td></tr>
    <tr><td>3</td><td id="ekskul3"></td><td id="predikat3" class="text-center"></td><td id="ket3" class="text-center"></td></tr>
  </table>
  <!-- Catatan Guru -->
  <div class="section-title-center">Catatan Guru</div>
  <table>
    <tr><td class="text-center" id="catatan_guru"></td></tr>
  </table>

  <!-- Ketidakhadiran -->
  <div class="section-title">Ketidakhadiran</div>
  <table class="half-table">
    <tr><td>Sakit</td><td>: <span id="sakit"></span> Hari</td></tr>
    <tr><td>Izin</td><td>: <span id="izin"></span> Hari</td></tr>
    <tr><td>Tanpa Keterangan</td><td>: <span id="alpa"></span> Hari</td></tr>
  </table>

  <!-- Tanda tangan -->
  <div class="footer">
    <div class="ttd-row">
      <div class="ttd">
        <p>Orang Tua/ Wali Peserta Didik</p><br><br><br>
        <p>................................</p>
      </div>
      <div class="ttd">
        <p>Kaur, <span id="tanggal"></span><br>Wali Kelas,</p><br><br><br>
        <p><b id="wali_kelas"></b></p>
      </div>
    </div>
    <div class="ttd-bottom">
      <p>Kepala Sekolah,</p><br><br><br>
      <p><b id="kepala_sekolah"></b></p>
    </div>
  </div>

<script>
  // Ambil data dari localStorage
  window.onload = () => {
    let data = JSON.parse(localStorage.getItem("raporData") || "{}");
    isiRapor(data);
  }

  function isiRapor(data) {
    // Identitas
    document.getElementById("nama_siswa").innerText = data["Nama Peserta Didik"] || "";
    document.getElementById("kelas").innerText = data["Kelas"] || "";
    document.getElementById("nisn").innerText = data["NISN"] || "";
    document.getElementById("nis").innerText = data["NIS"] || "";
    document.getElementById("fase").innerText = data["Fase"] || "";
    document.getElementById("semester").innerText = data["Semester"] || "";
    document.getElementById("tahun_ajaran").innerText = data["Tahun Ajaran"] || "";

    // Kelompok A
    document.getElementById("nilai_pai").innerText = data["Nilai PAI"] || "";
    document.getElementById("deskripsi_pai").innerText = data["Deskripsi PAI"] || "";
    document.getElementById("nilai_pkn").innerText = data["Nilai PKN"] || "";
    document.getElementById("deskripsi_pkn").innerText = data["Deskripsi PKN"] || "";
    document.getElementById("nilai_bing").innerText = data["Nilai B. Inggris"] || "";
    document.getElementById("deskripsi_bing").innerText = data["Deskripsi B. Inggris"] || "";
    document.getElementById("nilai_ipas").innerText = data["Nilai IPAS"] || "";
    document.getElementById("deskripsi_ipas").innerText = data["Deskripsi IPAS"] || "";
    document.getElementById("nilai_mtk").innerText = data["Nilai MTK"] || "";
    document.getElementById("deskripsi_mtk").innerText = data["Deskripsi MTK"] || "";
    document.getElementById("nilai_barab").innerText = data["Nilai B. Arab"] || "";
    document.getElementById("deskripsi_barab").innerText = data["Deskripsi B. Arab"] || "";
    document.getElementById("nilai_pjok").innerText = data["Nilai PJOK"] || "";
    document.getElementById("deskripsi_pjok").innerText = data["Deskripsi PJOK"] || "";
    document.getElementById("nilai_bindo").innerText = data["Nilai B.INDO"] || "";
    document.getElementById("deskripsi_bindo").innerText = data["Deskripsi B.INDO"] || "";
    document.getElementById("nilai_tik").innerText = data["Nilai TIK"] || "";
    document.getElementById("deskripsi_tik").innerText = data["Deskripsi TIK"] || "";

    // Kelompok B
    document.getElementById("nilai_ahd").innerText = data["Nilai AHD"] || "";
    document.getElementById("deskripsi_ahd").innerText = data["Deskripsi AHD"] || "";
    document.getElementById("nilai_t2q").innerText = data["Nilai T2Q"] || "";
    document.getElementById("deskripsi_t2q").innerText = data["Deskripsi T2Q"] || "";
    document.getElementById("nilai_sirah").innerText = data["Nilai SIROH"] || "";
    document.getElementById("deskripsi_sirah").innerText = data["Deskripsi SIROH"] || "";

    // Ekstrakurikuler
    document.getElementById("ekskul1").innerText = data["Ekskul 1"] || "";
    document.getElementById("predikat1").innerText = data["Predikat 1"] || "";
    document.getElementById("ket1").innerText = data["Keterangan 1"] || "";
    document.getElementById("ekskul2").innerText = data["Ekskul 2"] || "";
    document.getElementById("predikat2").innerText = data["Predikat 2"] || "";
    document.getElementById("ket2").innerText = data["Keterangan 2"] || "";
    document.getElementById("ekskul3").innerText = data["Ekskul 3"] || "";
    document.getElementById("predikat3").innerText = data["Predikat 3"] || "";
    document.getElementById("ket3").innerText = data["Keterangan 3"] || "";

    // Catatan
    document.getElementById("catatan_guru").innerText = data["Catatan Guru"] || "";

    // Ketidakhadiran
    document.getElementById("sakit").innerText = data["S"] || "0";
    document.getElementById("izin").innerText = data["I"] || "0";
    document.getElementById("alpa").innerText = data["A"] || "0";


    // Tanda tangan
    document.getElementById("tanggal").innerText = data["Tanggal"] || "";
    document.getElementById("wali_kelas").innerText = data["Wali Kelas"] || "";
    document.getElementById("kepala_sekolah").innerText = data["Kepala Sekolah"] || "";
  }
</script>
window.onload = () => {
  let data = JSON.parse(localStorage.getItem("raporData") || "{}");
  isiRapor(data);

  // auto-print jika query string ada ?print=1
  if (window.location.search.includes("print=1")) {
    setTimeout(() => {
      window.print();
    }, 500);
  }
};

</body>
</html>
