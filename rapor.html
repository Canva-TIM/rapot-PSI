<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rapor SD PSI</title>
<link rel="stylesheet" href="css/style.css">
<style>
  body { font-family: 'Times New Roman', serif; margin: 40px; font-size: 14px; color: #000; }
  table { width: 100%; border-collapse: collapse; margin-bottom: 12px; }
  th, td { border: 1px solid #000; padding: 8px 6px; vertical-align: top; line-height: 1.18; }
  .no-border td, .no-border th { border: none; padding: 4px; }
  .compact th, .compact td { padding: 2px 4px; line-height: 1; }
  .center { text-align: center; }
  .section-title { font-weight: bold; margin: 8px 0 4px 0; text-align: left; }
  .section-title-center { font-weight: bold; margin: 8px 0 4px 0; text-align: center; }
  .footer { margin-top: 40px; }
  .ttd-row { display: flex; justify-content: space-between; margin-bottom: 40px; }
  .ttd { width: 45%; text-align: center; }
  .ttd-bottom { text-align: center; margin-top: 40px; }
  .col-no { width: 5%; text-align: center; }
  .col-mapel { width:25%; text-align: justify; }
  .col-nilai { width: 8%; text-align: center; }
  .col-capai { width: 70%; text-align: justify; text-justify: inter-word; }
  .half-table { width: 50%; }
  .text-center { text-align: center; }
  h3.center { margin: 6px 0 12px 0; }

  @media print {
    @page { size: legal portrait; margin: 15mm; }
    body { margin: 0; font-size: 12pt; }
    .no-print { display: none !important; }
    table.compact th, table.compact td { padding: 3px 6px; line-height: 1.05; }
  }

  .print-btn {
    position: fixed; right: 18px; bottom: 18px; z-index: 1200;
    background: #007bff; color: #fff; border: none; padding: 10px 14px; border-radius: 8px; cursor: pointer;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
  }
  .print-btn:hover { opacity: 0.9; }
</style>
</head>
<body>
<div id="pdf-content">
  <!-- Identitas Siswa -->
  <table class="no-border compact">
    <tr>
      <td>Nama Peserta Didik</td><td>: <span id="nama_siswa"></span></td>
      <td>Kelas</td><td>: <span id="kelas"></span></td>
    </tr>
    <tr>
      <td>NISN/ NIS</td><td>: <span id="nisn"></span> / <span id="nis"></span></td>
      <td>Fase</td><td>: <span id="fase"></span></td>
    </tr>
    <tr>
      <td>Nama Sekolah</td><td>: SD PSI FATHIR ALFATH</td>
      <td>Semester</td><td>: <span id="semester"></span></td>
    </tr>
    <tr>
      <td>Alamat</td><td>: Jl. Lintas Barat Sumatera Gedung Sako II Kec. Kaur Selatan Kab. Kaur</td>
      <td>Tahun Ajaran</td><td>: <span id="tahun_ajaran"></span></td>
    </tr>
  </table>

  <h3 class="center">LAPORAN HASIL BELAJAR SUMATIF AKHIR SEMESTER</h3>

  <!-- Kelompok A -->
  <div class="section-title">Kelompok A</div>
  <table class="compact" id="tabelKelA">
    <tr>
      <th class="col-no">No.</th><th class="col-mapel">Mata Pelajaran</th>
      <th class="col-nilai">Nilai Akhir</th><th class="col-capai">Capaian Kompetensi</th>
    </tr>
  </table>

  <!-- Kelompok B -->
  <div class="section-title">Kelompok B</div>
  <table class="compact" id="tabelKelB">
    <tr>
      <th class="col-no">No.</th><th class="col-mapel">Mata Pelajaran</th>
      <th class="col-nilai">Nilai Akhir</th><th class="col-capai">Capaian Kompetensi</th>
    </tr>
  </table>

  <!-- Ekstrakurikuler -->
  <table class="compact" id="tabelEkskul">
    <tr>
      <th class="col-no">No.</th><th class="col-mapel">Ekstrakurikuler</th>
      <th class="col-nilai">Predikat</th><th class="col-capai">Keterangan</th>
    </tr>
  </table>

  <!-- Catatan Guru -->
  <div class="section-title-center">Catatan Guru</div>
  <table class="compact">
    <tr><td class="text-center" id="catatan_guru"></td></tr>
  </table>

  <!-- Ketidakhadiran -->
  <div class="section-title">Ketidakhadiran</div>
  <table class="compact half-table">
    <tr><td>Sakit</td><td>: <span id="sakit"></span> Hari</td></tr>
    <tr><td>Izin</td><td>: <span id="izin"></span> Hari</td></tr>
    <tr><td>Tanpa Keterangan</td><td>: <span id="alpa"></span> Hari</td></tr>
  </table>

  <!-- Tanda tangan -->
  <div class="footer">
    <div class="ttd-row">
      <!-- Wali Siswa kosong -->
      <div class="ttd">
        <p>Orang Tua/ Wali Peserta Didik</p><br><br>
        <img id="ttd_wali" style="width:150px; display:none; margin:0 auto;">
        <p id="nama_wali" style="margin-top:5px;">................................</p>
      </div>
      <!-- Wali Kelas -->
      <div class="ttd">
        <p>Kaur, <span id="tanggal"></span><br>Wali Kelas,</p><br><br>
        <img id="ttd_wali_kelas" src="images/cap_sekolah.png" style="width:150px; display:block; margin:0 auto;">
        <p id="wali_kelas"></p>
      </div>
    </div>

<div class="ttd-bottom" style="position: relative; height: 200px;">
  <p>Kepala Sekolah,</p><br><br>
  
  <!-- Container supaya cap menimpa ttd -->
  <div style="position: relative; width: 180px; margin: 0 auto;">
    <!-- Cap di atas TTD -->
    <img id="cap_sekolah" src="images/cap_sekolah.png" 
         style="position: absolute; top: -20px; left: 0; width: 100%; z-index: 2;">
    <!-- TTD kepala -->
    <img id="ttd_kepala" src="images/ttd_kepala.png" 
         style="position: relative; width: 100%; z-index: 1;">
  </div>
  <p>Elda Fuspita Sari, S.Pd</p>
</div>
  </div>
</div>

<button class="print-btn no-print" onclick="window.print()">Cetak</button>

<!-- html2pdf -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.min.js"></script>
<script src="js/rapor.js"></script>
</body>
</html>
